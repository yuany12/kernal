ADDSP3 R0 0x0000 ;0x0000
ADDSP3 R0 0x0000 ;0x0001
NOP ;0x0002


;保存切换至kernelPC的地坿
;0x3F00
;保存被切换kernelPC的地坿
;0x3F01

;保存切换至kernelSP的地坿
;0x3F02
;保存被切换kernelSP的地坿
;0x3F03

;保存切换至kernel寄存器的地址
;0x3F10~0x3F17
; R0   ~  R7
;保存被切换kernel寄存器的地址
;0x3F20~0x3F27
; R0   ~  R7


B START ;0x0003
NOP ;0x0004

DELINT:   ;中断处理程序
	NOP ;0x0005
	NOP ;0x0006
	NOP ;0x0007
	NOP ;0x0008
	NOP ;0x0009
	NOP ;0x000a
	;临时保存R7
	ADDSP 0xFFFF ;0x000b
	SW_SP R7 0x0000	 ;0x000c
	
	;保存被切换寄存器R0~R6
	LI R7 0x3F ;0x000d
	SLL R7 R7 0x0000 ;0x000e
	ADDIU R7 0x20					;R6=0x3F20 ;0x000f
	SW R7 R0 0x0000 ;0x0010
	SW R7 R1 0x0001 ;0x0011
	SW R7 R2 0x0002 ;0x0012
	SW R7 R3 0x0003 ;0x0013
	SW R7 R4 0x0004 ;0x0014
	SW R7 R5 0x0005 ;0x0015
	SW R7 R6 0x0006 ;0x0016
	
	;取出R7
	LW_SP R7 0x0000 ;0x0017
	ADDSP 0x0001 ;0x0018
	
	;保存被切换R7
	LI R6 0x3F ;0x0019
	SLL R6 R6 0x0000 ;0x001a
	ADDIU R6 0X20 ;0x001b
	SW R6 R7 0x0007 ;0x001c
	
	
	;R2=被切换pc
	JALR R2 ;redefined-- ;0x001d
	
	
	;保存被切换SP
	ADDSP3 R3 0x0000 ;0x001e
	LI R7 0x3F ;0x001f
	SLL R7 R7 0x0000 ;0x0020
	SW R7 R3 0x0003 ;0x0021
	
	
	
	;保存被切换pc，并交换切换至与被切换pc位置
	LI R7 0x3F ;0x0022
	SLL R7 R7 0x0000 ;0x0023
	LW R7 R6 0x0000    ;0x0024
	SW R7 R2 0x0000  ;0x0025
	SW R7 R6 0x0001 ;0x0026
	
	
	;恢复切换至SP
	LI R7 0x3F ;0x0027
	SLL R7 R7 0x0000 ;0x0028
	LW R7 R3 0x0002 ;0x0029
	NOP ;0x002a
	MTSP R3 ;0x002b
	
	;恢复切换至寄存器R0~R7
	LI R7 0x3F ;0x002c
	SLL R7 R7 0x0000 ;0x002d
	ADDIU R7 0x10					;R7=0x3F10 ;0x002e
	LW R7 R0 0x0000 ;0x002f
	LW R7 R1 0x0001 ;0x0030
	LW R7 R2 0x0002 ;0x0031
	LW R7 R3 0x0003 ;0x0032
	LW R7 R4 0x0004 ;0x0033
	LW R7 R5 0x0005 ;0x0034
	LW R7 R6 0x0006 ;0x0035
	LW R7 R7 0x0007 ;0x0036
	
	;临时保存R5~R7
	ADDSP 0xFFFF ;0x0037
	SW_SP R6 0x0000 ;0x0038
	ADDSP 0xFFFF ;0x0039
	SW_SP R7 0x0000 ;0x003a
	ADDSP 0xFFFF ;0x003b
	SW_SP R5 0x0000	 ;0x003c
	
	
	;将被切换数据转移至切换至保存匿 
	
	LI R7 0x3F ;0x003d
	SLL R7 R7 0x0000  ;0x003e
	ADDIU R7 0x0020  ;R7=0x3F20，被切换数据匿 ;0x003f
	
	LI R6 0x3F ;0x0040
	SLL R6 R6 0x0000 ;0x0041
	ADDIU R6 0x0010  ;R6=0x3F10，切换至数据匿 ;0x0042
	
	;转移R0~R7
	LW R7 R5 0x0 ;0x0043
	NOP ;0x0044
	SW R6 R5 0x0 ;0x0045
	NOP ;0x0046
	LW R7 R5 0x1 ;0x0047
	NOP ;0x0048
	SW R6 R5 0x1 ;0x0049
	NOP ;0x004a
	LW R7 R5 0x2 ;0x004b
	NOP ;0x004c
	SW R6 R5 0x2 ;0x004d
	NOP ;0x004e
	LW R7 R5 0x3 ;0x004f
	NOP ;0x0050
	SW R6 R5 0x3 ;0x0051
	NOP ;0x0052
	LW R7 R5 0x4 ;0x0053
	NOP ;0x0054
	SW R6 R5 0x4 ;0x0055
	NOP ;0x0056
	LW R7 R5 0x5 ;0x0057
	NOP ;0x0058
	SW R6 R5 0x5 ;0x0059
	NOP ;0x005a
	LW R7 R5 0x6 ;0x005b
	NOP ;0x005c
	SW R6 R5 0x6 ;0x005d
	NOP ;0x005e
	LW R7 R5 0x7 ;0x005f
	NOP ;0x0060
	SW R6 R5 0x7 ;0x0061
	
	;转移sp
	LI R7 0x3F ;0x0062
	SLL R7 R7 0x0  ;0x0063
	LW R7 R5 0x3 ;0x0064
	NOP ;0x0065
	SW R7 R5 0x2 ;0x0066
	
	;R6=切换至PC
	LI R7 0x3F ;0x0067
	SLL R7 R7 0x0000  ;0x0068
	LW R7 R6 0x0001 ;0x0069
	
	;恢复R5、R7
	LW_SP R5 0x0000 ;0x006a
	ADDSP 0x0001 ;0x006b
	LW_SP R7 0x0000 ;0x006c
	ADDSP 0x0001 ;0x006d
	
	;跳转并恢复R6
	ADDSP 0x0001 ;0x006e
	JR R6 ;0x006f
	LW_SP R6 0x00FF ;恢复R6 ;0x0070
	
	NOP	 ;0x0071


;kernel1保存用户程序寄存器的地址 
;0x9F10  0x9F11 0x9F12 0x9F13 0x9F14 0x9F15
; R0    R1   R2   R3   R4   R5  
START:
	;设置切换至PC
	MFPC R7 ;0x0072
	ADDIU R7 0X0B ;0x0073
	LI R6 0x3F ;0x0074
	SLL R6 R6 0x0000 ;0x0075
	SW R6 R7 0x0000 ;0x0076
	
	;设置切换至栈地址
	LI R0 0x009F  ;0x0077
	SLL R0 R0 0x0000 ;0x0078
	ADDIU R0 0xFFFF					;R0=0x9EFF  ;0x0079
	LI R6 0x3F ;0x007a
	SLL R6 R6 0x00 ;0x007b
	SW R6 R0 0x0002 ;0x007c
	
	;切换至kernel2
	B START2 ;0x007d
	NOP ;0x007e
	
	;初始化IH寄存器，朿高位丿1时，允许中断，为0时不允许。允许中斿
	LI R0 0x80 ;0x007f
	SLL R0 R0 0x00 ;0x0080
	ADDIU R0 0X07 ;0x0081
	MTIH R0 ;0x0082
		
	;用户寄存器忼初始化
	LI R6 0x009F  ;0x0083
	SLL R6 R6 0x0000 ;0x0084
	ADDIU R6 0x10					;R6=0x9F10  ;0x0085
	LI R0 0x0000 ;0x0086
	SW R6 R0 0x0000 ;0x0087
	SW R6 R0 0x0001 ;0x0088
	SW R6 R0 0x0002 ;0x0089
	SW R6 R0 0x0003 ;0x008a
	SW R6 R0 0x0004 ;0x008b
	SW R6 R0 0x0005 ;0x008c
		
	;WELCOME
	MFPC R7  ;0x008d
	ADDIU R7 0x0003   ;0x008e
	B TESTW                   ;0x008f
	NOP 	                  ;0x0090
	LI R6 0x00BF  ;0x0091
	SLL R6 R6 0x0000  ;0x0092
	LI R0 0x004F ;0x0093
	SW R6 R0 0x0000       ;0x0094
	NOP ;0x0095
	
	MFPC R7  ;0x0096
	ADDIU R7 0x0003   ;0x0097
	B TESTW 	              ;0x0098
	NOP                       ;0x0099
	LI R6 0x00BF  ;0x009a
	SLL R6 R6 0x0000  ;0x009b
	LI R0 0x004B ;0x009c
	SW R6 R0 0x0000 ;0x009d
	NOP ;0x009e
	
	MFPC R7  ;0x009f
	ADDIU R7 0x0003   ;0x00a0
	B TESTW 	              ;0x00a1
	NOP                       ;0x00a2
	LI R6 0x00BF  ;0x00a3
	SLL R6 R6 0x0000  ;0x00a4
	LI R0 0x000A ;0x00a5
	SW R6 R0 0x0000 ;0x00a6
	NOP ;0x00a7
	
	MFPC R7  ;0x00a8
	ADDIU R7 0x0003   ;0x00a9
	B TESTW                   ;0x00aa
	NOP	                      ;0x00ab
	LI R6 0x00BF  ;0x00ac
	SLL R6 R6 0x0000  ;0x00ad
	LI R0 0x000D ;0x00ae
	SW R6 R0 0x0000 ;0x00af
	NOP ;0x00b0
	

	
BEGIN:          ;棿测命仿
	;接收字符，保存到r1
	MFPC R7 ;0x00b1
	ADDIU R7 0x0003	 ;0x00b2
	NOP	 ;0x00b3
	B TESTR	 ;0x00b4
	NOP ;0x00b5
	LI R6 0x00BF  ;0x00b6
	SLL R6 R6 0x0000  ;0x00b7
	LW R6 R1 0x0000 ;0x00b8
	LI R6 0x00ff  ;0x00b9
    AND R1 R6  ;0x00ba
	NOP	 ;0x00bb
	

	;棿测是否为R命令		
	LI R0 0x0052 ;0x00bc
	CMP R0 R1 ;0x00bd
	BTEQZ SHOWREGS	 ;0x00be
	NOP	 ;0x00bf
	;棿测是否为D命令
	LI R0 0x0044 ;0x00c0
	CMP R0 R1 ;0x00c1
	BTEQZ SHOWMEM ;0x00c2
	NOP	 ;0x00c3
	
	;棿测是否为A命令
	LI R0 0x0041 ;0x00c4
	CMP R0 R1 ;0x00c5
	BTEQZ GOTOASM ;0x00c6
	NOP	 ;0x00c7
	
	;棿测是否为U命令
	LI R0 0x0055 ;0x00c8
	CMP R0 R1 ;0x00c9
	BTEQZ GOTOUASM ;0x00ca
	NOP	 ;0x00cb
	;棿测是否为G命令
	LI R0 0x0047 ;0x00cc
	CMP R0 R1 ;0x00cd
	BTEQZ GOTOCOMPILE ;0x00ce
	NOP		 ;0x00cf
	
	B BEGIN ;0x00d0
	NOP ;0x00d1

;各处理块的入叿
GOTOUASM:
	NOP ;0x00d2
	B UASM ;0x00d3
	NOP ;0x00d4
GOTOASM:
	NOP ;0x00d5
	B ASM ;0x00d6
	NOP ;0x00d7
	
GOTOCOMPILE:
	NOP ;0x00d8
	B COMPILE ;0x00d9
	NOP ;0x00da
  
	
;测试8251是否能写
TESTW:	
	NOP	 		 ;0x00db
	LI R6 0x00BF  ;0x00dc
	SLL R6 R6 0x0000  ;0x00dd
	ADDIU R6 0x0001  ;0x00de
	LW R6 R0 0x0000  ;0x00df
	LI R6 0x0001  ;0x00e0
	AND R0 R6  ;0x00e1
	BEQZ R0 TESTW     ;BF01&1=0 则等徿	 ;0x00e2
	NOP		 ;0x00e3
	JR R7 ;0x00e4
	NOP  ;0x00e5
	

	
;测试8251是否能读
TESTR:	
	NOP	 ;0x00e6
	LI R6 0x00BF  ;0x00e7
	SLL R6 R6 0x0000  ;0x00e8
	ADDIU R6 0x0001  ;0x00e9
	LW R6 R0 0x0000  ;0x00ea
	LI R6 0x0002 ;0x00eb
	AND R0 R6  ;0x00ec
	BEQZ R0 TESTR   ;BF01&2=0  则等徿	 ;0x00ed
	NOP	 ;0x00ee
	JR R7 ;0x00ef
	NOP 		 ;0x00f0
	
	
SHOWREGS:    ;R命令，打印R0-R5
	LI R1 0x0006  ;R1递减   ;0x00f1
	LI R2 0x0006   ;R2不变 ;0x00f2
	
LOOP:
	LI R0  0x009F ;0x00f3
	SLL R0 R0 0x0000 ;0x00f4
	ADDIU R0 0x0010 ;0x00f5
	SUBU R2 R1 R3   ;R2=0,1,2,3 ;0x00f6
	ADDU R0 R3 R0   ;R0=9F10... ;0x00f7
	LW R0 R3 0x0000    ;R3=用户程序皿 R0,R1,R2	 ;0x00f8

	;发鿁低八位
	MFPC R7 ;0x00f9
	ADDIU R7 0x0003	 ;0x00fa
	NOP ;0x00fb
	B TESTW	 ;0x00fc
	NOP	 ;0x00fd
	LI R6 0x00BF  ;0x00fe
	SLL R6 R6 0x0000 ;R6=BF00	 ;0x00ff
	SW R6 R3 0x0000	 ;0x0100
	;发鿁高八位
	SRA R3 R3 0x0000 ;0x0101
	MFPC R7 ;0x0102
	ADDIU R7 0x0003	 ;0x0103
	NOP ;0x0104
	B TESTW	 ;0x0105
	NOP	 ;0x0106
	LI R6 0x00BF  ;0x0107
	SLL R6 R6 0x0000 ;R6=0xBF00	 ;0x0108
	SW R6 R3 0x0000	 ;0x0109
	
	ADDIU R1 0xFFFF ;0x010a
	NOP ;0x010b
	BNEZ R1 LOOP ;0x010c
	NOP	 ;0x010d
	B BEGIN ;0x010e
	NOP ;0x010f
	

	
	

	
	
	
SHOWMEM:  ;查看内存	
;D读取地址低位到r5
	MFPC R7 ;0x0110
	ADDIU R7 0x0003	 ;0x0111
	NOP	 ;0x0112
	B TESTR	 ;0x0113
	NOP ;0x0114
	LI R6 0x00BF  ;0x0115
	SLL R6 R6 0x0000  ;0x0116
	LW R6 R5 0x0000	 ;0x0117
	LI R6 0x00FF ;0x0118
	AND R5 R6 ;0x0119
	NOP	 ;0x011a
	
	;读取地址高位到r1
	MFPC R7 ;0x011b
	ADDIU R7 0x0003	 ;0x011c
	NOP	 ;0x011d
	B TESTR	 ;0x011e
	NOP ;0x011f
	LI R6 0x00BF  ;0x0120
	SLL R6 R6 0x0000  ;0x0121
	LW R6 R1 0x0000 ;0x0122
	LI R6 0x00FF ;0x0123
	AND R1 R6 ;0x0124
	NOP	 ;0x0125
	
	
	
	;R1存储地址
	SLL R1 R1 0x0000 ;0x0126
	OR R1 R5 ;0x0127
	
	;读取显示次数低位到R5
	MFPC R7 ;0x0128
	ADDIU R7 0x0003	 ;0x0129
	NOP	 ;0x012a
	B TESTR	 ;0x012b
	NOP ;0x012c
	LI R6 0x00BF  ;0x012d
	SLL R6 R6 0x0000  ;0x012e
	LW R6 R5 0x0000 ;0x012f
	LI R6 0x00FF ;0x0130
	AND R5 R6 ;0x0131
	NOP	 ;0x0132
	;读取显示次数高位到R2
	MFPC R7 ;0x0133
	ADDIU R7 0x0003	 ;0x0134
	NOP	 ;0x0135
	B TESTR	 ;0x0136
	NOP ;0x0137
	LI R6 0x00BF  ;0x0138
	SLL R6 R6 0x0000  ;0x0139
	LW R6 R2 0x0000 ;0x013a
	LI R6 0x00FF ;0x013b
	AND R2 R6 ;0x013c
	NOP	 ;0x013d
	;R2保存内存个数
	SLL R2 R2 0x0000 ;0x013e
	OR R2 R5 ;0x013f

	
		;循环发出	
	
MEMLOOP:		
	
	LW R1 R3 0x0000    ;R3为内存数捿	 ;0x0140

	;发鿁低八位
	MFPC R7 ;0x0141
	ADDIU R7 0x0003	 ;0x0142
	NOP ;0x0143
	B TESTW	 ;0x0144
	NOP	 ;0x0145
	LI R6 0x00BF  ;0x0146
	SLL R6 R6 0x0000 ;R6=0xBF00	 ;0x0147
	SW R6 R3 0x0000	 ;0x0148
	;发鿁高八位

	SRA R3 R3 0x0000 ;0x0149
	MFPC R7 ;0x014a
	ADDIU R7 0x0003	 ;0x014b
	NOP ;0x014c
	B TESTW	 ;0x014d
	NOP	 ;0x014e
	LI R6 0x00BF  ;0x014f
	SLL R6 R6 0x0000 ;R6=0xBF00	 ;0x0150
	SW R6 R3 0x0000	 ;0x0151
	
	ADDIU R1 0x0001   ;R1=地址加加势 ;0x0152
	ADDIU R2 0xFFFF ;0x0153
	NOP ;0x0154
	BNEZ R2 MEMLOOP ;0x0155
	NOP	 ;0x0156

	B BEGIN ;0x0157
	NOP		 ;0x0158


 ;汇编	
ASM:  
	;A命令读取地址低位到r5
	MFPC R7 ;0x0159
	ADDIU R7 0x0003	 ;0x015a
	NOP	 ;0x015b
	B TESTR	 ;0x015c
	NOP ;0x015d
	LI R6 0x00BF  ;0x015e
	SLL R6 R6 0x0000  ;0x015f
	LW R6 R5 0x0000 ;0x0160
	LI R6 0x00FF ;0x0161
	AND R5 R6 ;0x0162
	NOP	 ;0x0163
	;读取地址高位到r1
	MFPC R7 ;0x0164
	ADDIU R7 0x0003	 ;0x0165
	NOP	 ;0x0166
	B TESTR	 ;0x0167
	NOP ;0x0168
	LI R6 0x00BF  ;0x0169
	SLL R6 R6 0x0000  ;0x016a
	LW R6 R1 0x0000 ;0x016b
	LI R6 0x00FF ;0x016c
	AND R1 R6 ;0x016d
	NOP	 ;0x016e
	
	;R1存储地址
	SLL R1 R1 0x0000 ;0x016f
	OR R1 R5 ;0x0170
	
	
	
	
	;棿测地坿是否合法
	LI R0 0x0000 ;0x0171
	CMP R0 R1       ;0x0172
  BTEQZ GOTOBEGIN ;0x0173
	NOP	 ;0x0174
	
 
	;读取数据低位到R5
	MFPC R7 ;0x0175
	ADDIU R7 0x0003	 ;0x0176
	NOP	 ;0x0177
	B TESTR	 ;0x0178
	NOP ;0x0179
	LI R6 0x00BF  ;0x017a
	SLL R6 R6 0x0000  ;0x017b
	LW R6 R5 0x0000 ;0x017c
	LI R6 0x00FF ;0x017d
	AND R5 R6 ;0x017e
	NOP	 ;0x017f
	

	;读取数据高位到R2
	MFPC R7 ;0x0180
	ADDIU R7 0x0003	 ;0x0181
	NOP	 ;0x0182
	B TESTR	 ;0x0183
	NOP ;0x0184
	LI R6 0x00BF  ;0x0185
	SLL R6 R6 0x0000  ;0x0186
	LW R6 R2 0x0000 ;0x0187
	LI R6 0x00FF ;0x0188
	AND R2 R6 ;0x0189
	NOP	 ;0x018a
	;R2保存数据
	SLL R2 R2 0x0000 ;0x018b
	OR R2 R5 ;0x018c
			
	SW R1 R2 0x0000	 ;0x018d
	NOP ;0x018e
	
	B ASM ;0x018f
	NOP ;0x0190
	
GOTOBEGIN:
	NOP ;0x0191
	B BEGIN ;0x0192
	NOP ;0x0193
	
	
	
	
;反汇编：将需要反汇编的地坿处的值发给终端处琿	
UASM:
;读取地址低位到r5
	MFPC R7 ;0x0194
	ADDIU R7 0x0003	 ;0x0195
	NOP	 ;0x0196
	B TESTR	 ;0x0197
	NOP ;0x0198
	LI R6 0x00BF  ;0x0199
	SLL R6 R6 0x0000  ;0x019a
	LW R6 R5 0x0000 ;0x019b
	LI R6 0x00FF ;0x019c
	AND R5 R6 ;0x019d
	NOP	 ;0x019e
	;读取地址高位到r1
	MFPC R7 ;0x019f
	ADDIU R7 0x0003	 ;0x01a0
	NOP	 ;0x01a1
	B TESTR	 ;0x01a2
	NOP ;0x01a3
	LI R6 0x00BF  ;0x01a4
	SLL R6 R6 0x0000  ;0x01a5
	LW R6 R1 0x0000 ;0x01a6
	LI R6 0x00FF ;0x01a7
	AND R1 R6 ;0x01a8
	NOP	 ;0x01a9
	
	
	
	;R1存储地址
	SLL R1 R1 0x0000 ;0x01aa
	OR R1 R5 ;0x01ab
	
	;读取显示次数低位到R5
	MFPC R7 ;0x01ac
	ADDIU R7 0x0003	 ;0x01ad
	NOP	 ;0x01ae
	B TESTR	 ;0x01af
	NOP ;0x01b0
	LI R6 0x00BF  ;0x01b1
	SLL R6 R6 0x0000  ;0x01b2
	LW R6 R5 0x0000 ;0x01b3
	LI R6 0x00FF ;0x01b4
	AND R5 R6 ;0x01b5
	NOP	 ;0x01b6
	;读取显示次数高位到R2
	MFPC R7 ;0x01b7
	ADDIU R7 0x0003	 ;0x01b8
	NOP	 ;0x01b9
	B TESTR	 ;0x01ba
	NOP ;0x01bb
	LI R6 0x00BF  ;0x01bc
	SLL R6 R6 0x0000  ;0x01bd
	LW R6 R2 0x0000 ;0x01be
	LI R6 0x00FF ;0x01bf
	AND R2 R6 ;0x01c0
	NOP	 ;0x01c1
	;R2保存内存个数
	SLL R2 R2 0x0000 ;0x01c2
	OR R2 R5 ;0x01c3

	
		;循环发出	
	
UASMLOOP:		
	
	LW R1 R3 0x0000    ;R3为内存数捿	 ;0x01c4

	;发鿁低八位
	MFPC R7 ;0x01c5
	ADDIU R7 0x0003	 ;0x01c6
	NOP ;0x01c7
	B TESTW	 ;0x01c8
	NOP	 ;0x01c9
	LI R6 0x00BF  ;0x01ca
	SLL R6 R6 0x0000 ;R6=0xBF00	 ;0x01cb
	SW R6 R3 0x0000	 ;0x01cc
	;发鿁高八位

	SRA R3 R3 0x0000 ;0x01cd
	MFPC R7 ;0x01ce
	ADDIU R7 0x0003	 ;0x01cf
	NOP ;0x01d0
	B TESTW	 ;0x01d1
	NOP	 ;0x01d2
	LI R6 0x00BF  ;0x01d3
	SLL R6 R6 0x0000 ;R6=0xBF00	 ;0x01d4
	SW R6 R3 0x0000	 ;0x01d5
	
	ADDIU R1 0x0001   ;R1=地址加加势 ;0x01d6
	ADDIU R2 0xFFFF ;0x01d7
	NOP ;0x01d8
	BNEZ R2 UASMLOOP ;0x01d9
	NOP	 ;0x01da

	B BEGIN ;0x01db
	NOP			 ;0x01dc
	
;连续执行
COMPILE:
	;读取地址低位到R5
	MFPC R7 ;0x01dd
	ADDIU R7 0x0003	 ;0x01de
	NOP	 ;0x01df
	B TESTR	 ;0x01e0
	NOP ;0x01e1
	LI R6 0x00BF  ;0x01e2
	SLL R6 R6 0x0000  ;0x01e3
	LW R6 R5 0x0000 ;0x01e4
	LI R6 0x00FF ;0x01e5
	AND R5 R6 ;0x01e6
	NOP	 ;0x01e7
	;读取内存高位到R2
	MFPC R7 ;0x01e8
	ADDIU R7 0x0003	 ;0x01e9
	NOP	 ;0x01ea
	B TESTR	 ;0x01eb
	NOP ;0x01ec
	LI R6 0x00BF  ;0x01ed
	SLL R6 R6 0x0000  ;0x01ee
	LW R6 R2 0x0000 ;0x01ef
	LI R6 0x00FF ;0x01f0
	AND R2 R6 ;0x01f1
	NOP	 ;0x01f2
	;R2保存内存地址  传给r6
	SLL R2 R2 0x0000 ;0x01f3
	OR R2 R5 ;0x01f4
	ADDIU3 R2 R6 0x0000 ;0x01f5
	
	
	LI R7 0x009F ;0x01f6
	SLL R7 R7 0x0000 ;0x01f7
	ADDIU R7 0x0010 ;0x01f8
	
	LW R7 R5 0x0005 ;0x01f9
	ADDSP 0xFFFF        ;0x01fa
	SW_SP R5 0x0000 ;0x01fb
	
	
	;中断保存在R5丿
	MFIH R5 ;0x01fc
	LI R1 0x0080 ;0x01fd
	SLL R1 R1 0x000 ;0x01fe
	OR R5 R1 ;0x01ff
	
	
	
	;恢复现场
	LW R7 R0 0x0000 ;0x0200
	LW R7 R1 0x0001 ;0x0201
	LW R7 R2 0x0002 ;0x0202
	LW R7 R3 0x0003 ;0x0203
	LW R7 R4 0x0004 ;0x0204
	
	
	
	MFPC R7 ;0x0205
	ADDIU R7 0x0004 ;0x0206
	;MTIH R5    ;IH高位赿1	---
	JR R6 ;0x0207
	LW_SP R5 0x0000  ;R5恢复现场 ;0x0208
	
	;用户程序执行完毕，返回kernel，保存现圿
	NOP ;0x0209
	NOP ;0x020a
	ADDSP 0x0001 ;0x020b
	LI R7 0x009F ;0x020c
	SLL R7 R7 0x0000 ;0x020d
	ADDIU R7 0x0010 ;0x020e
	
	SW R7 R0 0x0000 ;0x020f
	SW R7 R1 0x0001 ;0x0210
	SW R7 R2 0x0002 ;0x0211
	SW R7 R3 0x0003 ;0x0212
	SW R7 R4 0x0004 ;0x0213
	SW R7 R5 0x0005 ;0x0214
	
	;IH高位赿0
	MFIH R0 ;0x0215
	LI R1 0x008F ;-- ;0x0216
	SLL R1 R1 0x0000 ;0x0217
	LI R2 0x00FF ;0x0218
	OR R1 R2	 ;0x0219
	AND R0 R1 ;0x021a
	;MTIH R0 ---
	
	;给终端发送结束用户程序提礿
	LI R1 0x0007 ;0x021b
	MFPC R7 ;0x021c
	ADDIU R7 0x0003	 ;0x021d
	NOP ;0x021e
	B TESTW	 ;0x021f
	NOP	 ;0x0220
	LI R6 0x00BF  ;0x0221
	SLL R6 R6 0x0000 ;R6=0xBF00	 ;0x0222
	SW R6 R1 0x0000		 ;0x0223
	B BEGIN ;0x0224
	NOP	 ;0x0225
		
	
	



;kernel2保存用户程序寄存器的地址 
;0xBF10  0xBF11 BF12 0xBF13 BF14 0xBF15
; R0    R1   R2   R3   R4   R5  

;init  0x8251
START2:
	;初始化IH寄存器，朿高位丿1时，允许中断，为0时不允许。初始化丿1，允许中斿
	LI R0 0x80 ;0x0226
	SLL R0 R0 0x00 ;0x0227
	ADDIU R0 0X07 ;0x0228
	MTIH R0 ;0x0229
	;初始化栈地址
	LI R0 0x00BF  ;0x022a
	SLL R0 R0 0x0000 ;0x022b
	ADDIU R0 0xFFFF					;R0=0xBEFF ;0x022c
	MTSP R0 ;0x022d
	NOP ;0x022e
	
	;用户寄存器忼初始化
	LI R6 0x00BF  ;0x022f
	SLL R6 R6 0x0000 ;0x0230
	ADDIU R6 0x10					;R6=0xBF10  ;0x0231
	LI R0 0x0000 ;0x0232
	SW R6 R0 0x0000 ;0x0233
	SW R6 R0 0x0001 ;0x0234
	SW R6 R0 0x0002 ;0x0235
	SW R6 R0 0x0003 ;0x0236
	SW R6 R0 0x0004 ;0x0237
	SW R6 R0 0x0005 ;0x0238
		
	;WELCOME
	MFPC R7  ;0x0239
	ADDIU R7 0x0003   ;0x023a
	B TESTW2                   ;0x023b
	NOP 	                  ;0x023c
	LI R6 0x00BF  ;0x023d
	SLL R6 R6 0x0000 ;0x023e
	LI R0 0x004F ;0x023f
	SW R6 R0 0x0002   ;BF02      ;0x0240
	NOP ;0x0241
	
	MFPC R7  ;0x0242
	ADDIU R7 0x0003   ;0x0243
	B TESTW2 	              ;0x0244
	NOP                       ;0x0245
	LI R6 0x00BF  ;0x0246
	SLL R6 R6 0x0000  ;0x0247
	LI R0 0x004B ;0x0248
	SW R6 R0 0x0002   ;BF02 ;0x0249
	NOP ;0x024a
	
	MFPC R7  ;0x024b
	ADDIU R7 0x0003   ;0x024c
	B TESTW2 	              ;0x024d
	NOP                       ;0x024e
	LI R6 0x00BF  ;0x024f
	SLL R6 R6 0x0000  ;0x0250
	LI R0 0x000A ;0x0251
	SW R6 R0 0x0002   ;BF02 ;0x0252
	NOP ;0x0253
	
	MFPC R7  ;0x0254
	ADDIU R7 0x0003   ;0x0255
	B TESTW2                   ;0x0256
	NOP	                      ;0x0257
	LI R6 0x00BF  ;0x0258
	SLL R6 R6 0x0000  ;0x0259
	LI R0 0x000D ;0x025a
	SW R6 R0 0x0002   ;BF02 ;0x025b
	NOP ;0x025c
	

	

	

	
BEGIN2:          ;棿测命仿
	;接收字符，保存到r1
	MFPC R7 ;0x025d
	ADDIU R7 0x0003	 ;0x025e
	NOP	 ;0x025f
	B TESTR2	 ;0x0260
	NOP ;0x0261
	LI R6 0x00BF  ;0x0262
	SLL R6 R6 0x0000  ;0x0263
	LW R6 R1 0x0002   ;BF02 ;0x0264
	LI R6 0x00ff  ;0x0265
    AND R1 R6  ;0x0266
	NOP	 ;0x0267
	

	;棿测是否为R命令		
	LI R0 0x0052 ;0x0268
	CMP R0 R1 ;0x0269
	BTEQZ SHOWREGS2	 ;0x026a
	NOP	 ;0x026b
	;棿测是否为D命令
	LI R0 0x0044 ;0x026c
	CMP R0 R1 ;0x026d
	BTEQZ SHOWMEM2 ;0x026e
	NOP	 ;0x026f
	
	;棿测是否为A命令
	LI R0 0x0041 ;0x0270
	CMP R0 R1 ;0x0271
	BTEQZ GOTOASM2 ;0x0272
	NOP	 ;0x0273
	
	;棿测是否为U命令
	LI R0 0x0055 ;0x0274
	CMP R0 R1 ;0x0275
	BTEQZ GOTOUASM2 ;0x0276
	NOP	 ;0x0277
	;棿测是否为G命令
	LI R0 0x0047 ;0x0278
	CMP R0 R1 ;0x0279
	BTEQZ GOTOCOMPILE2 ;0x027a
	NOP		 ;0x027b
	
	B BEGIN2 ;0x027c
	NOP ;0x027d

;各处理块的入叿
GOTOUASM2:
	NOP ;0x027e
	B UASM2 ;0x027f
	NOP ;0x0280
GOTOASM2:
	NOP ;0x0281
	B ASM2 ;0x0282
	NOP ;0x0283
	
GOTOCOMPILE2:
	NOP ;0x0284
	B COMPILE2 ;0x0285
	NOP ;0x0286
  
	
;测试8251是否能写
TESTW2:	
	NOP	 		 ;0x0287
	LI R6 0x00BF  ;0x0288
	SLL R6 R6 0x0000  ;0x0289
	ADDIU R6 0x0003   ;R6=0xBF03 ;0x028a
	LW R6 R0 0x0000  ;0x028b
	LI R6 0x0001  ;0x028c
	AND R0 R6  ;0x028d
	BEQZ R0 TESTW2     ;BF03&1=0 则等徿	 ;0x028e
	NOP		 ;0x028f
	JR R7 ;0x0290
	NOP  ;0x0291
	

	
;测试8251是否能读
TESTR2:	
	NOP	 ;0x0292
	LI R6 0x00BF  ;0x0293
	SLL R6 R6 0x0000  ;0x0294
	ADDIU R6 0x0003  ;R6=0xBF03 ;0x0295
	LW R6 R0 0x0000  ;0x0296
	LI R6 0x0002 ;0x0297
	AND R0 R6  ;0x0298
	BEQZ R0 TESTR2   ;BF03&2=0  则等徿	 ;0x0299
	NOP	 ;0x029a
	JR R7 ;0x029b
	NOP 		 ;0x029c
	
	
SHOWREGS2:    ;R命令，打印R0-R5
	LI R1 0x0006  ;R1递减   ;0x029d
	LI R2 0x0006   ;R2不变 ;0x029e
	
LOOP2:
	LI R0  0x00BF ;0x029f
	SLL R0 R0 0x0000 ;0x02a0
	ADDIU R0 0x0010 ;0x02a1
	SUBU R2 R1 R3   ;R2=0,1,2,3 ;0x02a2
	ADDU R0 R3 R0   ;R0=BF10... ;0x02a3
	LW R0 R3 0x0000    ;R3=用户程序皿 R0,R1,R2	 ;0x02a4

	;发鿁低八位
	MFPC R7 ;0x02a5
	ADDIU R7 0x0003	 ;0x02a6
	NOP ;0x02a7
	B TESTW2	 ;0x02a8
	NOP	 ;0x02a9
	LI R6 0x00BF  ;0x02aa
	SLL R6 R6 0x0000  ;0x02ab
	SW R6 R3 0x0002   ;BF02 ;0x02ac
	;发鿁高八位
	SRA R3 R3 0x0000 ;0x02ad
	MFPC R7 ;0x02ae
	ADDIU R7 0x0003	 ;0x02af
	NOP ;0x02b0
	B TESTW2	 ;0x02b1
	NOP	 ;0x02b2
	LI R6 0x00BF  ;0x02b3
	SLL R6 R6 0x0000  ;0x02b4
	SW R6 R3 0x0002   ;BF02 ;0x02b5
	
	ADDIU R1 0xFFFF ;0x02b6
	NOP ;0x02b7
	BNEZ R1 LOOP2 ;0x02b8
	NOP	 ;0x02b9
	B BEGIN2 ;0x02ba
	NOP ;0x02bb
	

	
	

	
	
	
SHOWMEM2:  ;查看内存	
;D读取地址低位到r5
	MFPC R7 ;0x02bc
	ADDIU R7 0x0003	 ;0x02bd
	NOP	 ;0x02be
	B TESTR2	 ;0x02bf
	NOP ;0x02c0
	LI R6 0x00BF  ;0x02c1
	SLL R6 R6 0x0000 ;0x02c2
	LW R6 R5 0x0002   ;BF02 ;0x02c3
	LI R6 0x00FF ;0x02c4
	AND R5 R6 ;0x02c5
	NOP	 ;0x02c6
	
	;读取地址高位到r1
	MFPC R7 ;0x02c7
	ADDIU R7 0x0003	 ;0x02c8
	NOP	 ;0x02c9
	B TESTR2	 ;0x02ca
	NOP ;0x02cb
	LI R6 0x00BF  ;0x02cc
	SLL R6 R6 0x0000  ;0x02cd
	LW R6 R1 0x0002   ;BF02 ;0x02ce
	LI R6 0x00FF ;0x02cf
	AND R1 R6 ;0x02d0
	NOP	 ;0x02d1
	
	
	
	;R1存储地址
	SLL R1 R1 0x0000 ;0x02d2
	OR R1 R5 ;0x02d3
	
	;读取显示次数低位到R5
	MFPC R7 ;0x02d4
	ADDIU R7 0x0003	 ;0x02d5
	NOP	 ;0x02d6
	B TESTR2	 ;0x02d7
	NOP ;0x02d8
	LI R6 0x00BF  ;0x02d9
	SLL R6 R6 0x0000  ;0x02da
	LW R6 R5 0x0002   ;BF02 ;0x02db
	LI R6 0x00FF ;0x02dc
	AND R5 R6 ;0x02dd
	NOP	 ;0x02de
	;读取显示次数高位到R2
	MFPC R7 ;0x02df
	ADDIU R7 0x0003	 ;0x02e0
	NOP	 ;0x02e1
	B TESTR2	 ;0x02e2
	NOP ;0x02e3
	LI R6 0x00BF  ;0x02e4
	SLL R6 R6 0x0000  ;0x02e5
	LW R6 R2 0x0002   ;BF02 ;0x02e6
	LI R6 0x00FF ;0x02e7
	AND R2 R6 ;0x02e8
	NOP	 ;0x02e9
	;R2保存内存个数
	SLL R2 R2 0x0000 ;0x02ea
	OR R2 R5 ;0x02eb

	
		;循环发出	
	
MEMLOOP2:		
	
	LW R1 R3 0x0000    ;R3为内存数捿	 ;0x02ec

	;发鿁低八位
	MFPC R7 ;0x02ed
	ADDIU R7 0x0003	 ;0x02ee
	NOP ;0x02ef
	B TESTW2	 ;0x02f0
	NOP	 ;0x02f1
	LI R6 0x00BF  ;0x02f2
	SLL R6 R6 0x0000  ;0x02f3
	SW R6 R3 0x0002   ;BF02 ;0x02f4
	;发鿁高八位

	SRA R3 R3 0x0000 ;0x02f5
	MFPC R7 ;0x02f6
	ADDIU R7 0x0003	 ;0x02f7
	NOP ;0x02f8
	B TESTW2	 ;0x02f9
	NOP	 ;0x02fa
	LI R6 0x00BF  ;0x02fb
	SLL R6 R6 0x0000  ;0x02fc
	SW R6 R3 0x0002   ;BF02 ;0x02fd
	
	ADDIU R1 0x0001   ;R1=地址加加势 ;0x02fe
	ADDIU R2 0xFFFF ;0x02ff
	NOP ;0x0300
	BNEZ R2 MEMLOOP2 ;0x0301
	NOP	 ;0x0302

	B BEGIN2 ;0x0303
	NOP		 ;0x0304


 ;汇编	
ASM2:  
	;A命令读取地址低位到r5
	MFPC R7 ;0x0305
	ADDIU R7 0x0003	 ;0x0306
	NOP	 ;0x0307
	B TESTR2	 ;0x0308
	NOP ;0x0309
	LI R6 0x00BF  ;0x030a
	SLL R6 R6 0x0000  ;0x030b
	LW R6 R5 0x0002   ;BF02 ;0x030c
	LI R6 0x00FF ;0x030d
	AND R5 R6 ;0x030e
	NOP	 ;0x030f
	;读取地址高位到r1
	MFPC R7 ;0x0310
	ADDIU R7 0x0003	 ;0x0311
	NOP	 ;0x0312
	B TESTR2	 ;0x0313
	NOP ;0x0314
	LI R6 0x00BF  ;0x0315
	SLL R6 R6 0x0000  ;0x0316
	LW R6 R1 0x0002   ;BF02 ;0x0317
	LI R6 0x00FF ;0x0318
	AND R1 R6 ;0x0319
	NOP	 ;0x031a
	
	;R1存储地址
	SLL R1 R1 0x0000 ;0x031b
	OR R1 R5 ;0x031c
	
	
	
	
	;棿测地坿是否合法
	LI R0 0x0000 ;0x031d
	CMP R0 R1       ;0x031e
  BTEQZ GOTOBEGIN2 ;0x031f
	NOP	 ;0x0320
	
 
	;读取数据低位到R5
	MFPC R7 ;0x0321
	ADDIU R7 0x0003	 ;0x0322
	NOP	 ;0x0323
	B TESTR2	 ;0x0324
	NOP ;0x0325
	LI R6 0x00BF  ;0x0326
	SLL R6 R6 0x0000  ;0x0327
	LW R6 R5 0x0002   ;BF02 ;0x0328
	LI R6 0x00FF ;0x0329
	AND R5 R6 ;0x032a
	NOP	 ;0x032b
	

	;读取数据高位到R2
	MFPC R7 ;0x032c
	ADDIU R7 0x0003	 ;0x032d
	NOP	 ;0x032e
	B TESTR2	 ;0x032f
	NOP ;0x0330
	LI R6 0x00BF  ;0x0331
	SLL R6 R6 0x0000  ;0x0332
	LW R6 R2 0x0002   ;BF02 ;0x0333
	LI R6 0x00FF ;0x0334
	AND R2 R6 ;0x0335
	NOP	 ;0x0336
	;R2保存数据
	SLL R2 R2 0x0000 ;0x0337
	OR R2 R5 ;0x0338
			
	SW R1 R2 0x0000	 ;0x0339
	NOP ;0x033a
	
	B ASM2 ;0x033b
	NOP ;0x033c
	
GOTOBEGIN2:
	NOP ;0x033d
	B BEGIN2 ;0x033e
	NOP ;0x033f
	
	
	
	
;反汇编：将需要反汇编的地坿处的值发给终端处琿	
UASM2:
;读取地址低位到r5
	MFPC R7 ;0x0340
	ADDIU R7 0x0003	 ;0x0341
	NOP	 ;0x0342
	B TESTR2	 ;0x0343
	NOP ;0x0344
	LI R6 0x00BF  ;0x0345
	SLL R6 R6 0x0000  ;0x0346
	LW R6 R5 0x0002   ;BF02 ;0x0347
	LI R6 0x00FF ;0x0348
	AND R5 R6 ;0x0349
	NOP	 ;0x034a
	;读取地址高位到r1
	MFPC R7 ;0x034b
	ADDIU R7 0x0003	 ;0x034c
	NOP	 ;0x034d
	B TESTR2	 ;0x034e
	NOP ;0x034f
	LI R6 0x00BF  ;0x0350
	SLL R6 R6 0x0000  ;0x0351
	LW R6 R1 0x0002   ;BF02 ;0x0352
	LI R6 0x00FF ;0x0353
	AND R1 R6 ;0x0354
	NOP	 ;0x0355
	
	
	
	;R1存储地址
	SLL R1 R1 0x0000 ;0x0356
	OR R1 R5 ;0x0357
	
	;读取显示次数低位到R5
	MFPC R7 ;0x0358
	ADDIU R7 0x0003	 ;0x0359
	NOP	 ;0x035a
	B TESTR2	 ;0x035b
	NOP ;0x035c
	LI R6 0x00BF  ;0x035d
	SLL R6 R6 0x0000  ;0x035e
	LW R6 R5 0x0002   ;BF02 ;0x035f
	LI R6 0x00FF ;0x0360
	AND R5 R6 ;0x0361
	NOP	 ;0x0362
	;读取显示次数高位到R2
	MFPC R7 ;0x0363
	ADDIU R7 0x0003	 ;0x0364
	NOP	 ;0x0365
	B TESTR2	 ;0x0366
	NOP ;0x0367
	LI R6 0x00BF  ;0x0368
	SLL R6 R6 0x0000  ;0x0369
	LW R6 R2 0x0002   ;BF02 ;0x036a
	LI R6 0x00FF ;0x036b
	AND R2 R6 ;0x036c
	NOP	 ;0x036d
	;R2保存内存个数
	SLL R2 R2 0x0000 ;0x036e
	OR R2 R5 ;0x036f

	
		;循环发出	
	
UASMLOOP2:		
	
	LW R1 R3 0x0000    ;R3为内存数捿	 ;0x0370

	;发鿁低八位
	MFPC R7 ;0x0371
	ADDIU R7 0x0003	 ;0x0372
	NOP ;0x0373
	B TESTW2	 ;0x0374
	NOP	 ;0x0375
	LI R6 0x00BF  ;0x0376
	SLL R6 R6 0x0000  ;0x0377
	SW R6 R3 0x0002   ;BF02 ;0x0378
	;发鿁高八位

	SRA R3 R3 0x0000 ;0x0379
	MFPC R7 ;0x037a
	ADDIU R7 0x0003	 ;0x037b
	NOP ;0x037c
	B TESTW2	 ;0x037d
	NOP	 ;0x037e
	LI R6 0x00BF  ;0x037f
	SLL R6 R6 0x0000  ;0x0380
	SW R6 R3 0x0002   ;BF02	 ;0x0381
	
	ADDIU R1 0x0001   ;R1=地址加加势 ;0x0382
	ADDIU R2 0xFFFF ;0x0383
	NOP ;0x0384
	BNEZ R2 UASMLOOP2 ;0x0385
	NOP	 ;0x0386

	B BEGIN2 ;0x0387
	NOP			 ;0x0388
	
;连续执行
COMPILE2:
	;读取地址低位到R5
	MFPC R7 ;0x0389
	ADDIU R7 0x0003	 ;0x038a
	NOP	 ;0x038b
	B TESTR2	 ;0x038c
	NOP ;0x038d
	LI R6 0x00BF  ;0x038e
	SLL R6 R6 0x0000  ;0x038f
	LW R6 R5 0x0002   ;BF02 ;0x0390
	LI R6 0x00FF ;0x0391
	AND R5 R6 ;0x0392
	NOP	 ;0x0393
	;读取内存高位到R2
	MFPC R7 ;0x0394
	ADDIU R7 0x0003	 ;0x0395
	NOP	 ;0x0396
	B TESTR2	 ;0x0397
	NOP ;0x0398
	LI R6 0x00BF  ;0x0399
	SLL R6 R6 0x0000  ;0x039a
	LW R6 R2 0x0002   ;BF02 ;0x039b
	LI R6 0x00FF ;0x039c
	AND R2 R6 ;0x039d
	NOP	 ;0x039e
	;R2保存内存地址  传给r6
	SLL R2 R2 0x0000 ;0x039f
	OR R2 R5 ;0x03a0
	ADDIU3 R2 R6 0x0000 ;0x03a1
	
	
	LI R7 0x00BF ;0x03a2
	SLL R7 R7 0x0000 ;0x03a3
	ADDIU R7 0x0010 ;0x03a4
	
	LW R7 R5 0x0005 ;0x03a5
	ADDSP 0xFFFF        ;0x03a6
	SW_SP R5 0x0000 ;0x03a7
	
	
	;中断保存在R5丿
	MFIH R5 ;0x03a8
	LI R1 0x0080 ;0x03a9
	SLL R1 R1 0x000 ;0x03aa
	OR R5 R1 ;0x03ab
	
	
	
	;恢复现场
	LW R7 R0 0x0000 ;0x03ac
	LW R7 R1 0x0001 ;0x03ad
	LW R7 R2 0x0002 ;0x03ae
	LW R7 R3 0x0003 ;0x03af
	LW R7 R4 0x0004 ;0x03b0
	
	
	
	MFPC R7 ;0x03b1
	ADDIU R7 0x0004 ;0x03b2
	;MTIH R5    ;IH高位赿1---	
	JR R6 ;0x03b3
	LW_SP R5 0x0000  ;R5恢复现场 ;0x03b4
	
	;用户程序执行完毕，返回kernel，保存现圿
	NOP ;0x03b5
	NOP ;0x03b6
	ADDSP 0x0001 ;0x03b7
	LI R7 0x00BF ;0x03b8
	SLL R7 R7 0x0000 ;0x03b9
	ADDIU R7 0x0010 ;0x03ba
	
	SW R7 R0 0x0000 ;0x03bb
	SW R7 R1 0x0001 ;0x03bc
	SW R7 R2 0x0002 ;0x03bd
	SW R7 R3 0x0003 ;0x03be
	SW R7 R4 0x0004 ;0x03bf
	SW R7 R5 0x0005 ;0x03c0
	
	;IH高位赿0--
	MFIH R0 ;0x03c1
	LI R1 0x008F ;-- ;0x03c2
	SLL R1 R1 0x0000 ;0x03c3
	LI R2 0x00FF ;0x03c4
	OR R1 R2	 ;0x03c5
	AND R0 R1 ;0x03c6
	;MTIH R0 ---
	
	;给终端发送结束用户程序提礿
	LI R1 0x0007 ;0x03c7
	MFPC R7 ;0x03c8
	ADDIU R7 0x0003	 ;0x03c9
	NOP ;0x03ca
	B TESTW2	 ;0x03cb
	NOP	 ;0x03cc
	LI R6 0x00BF  ;0x03cd
	SLL R6 R6 0x0000  ;0x03ce
	SW R6 R1 0x0002   ;BF02		 ;0x03cf
	B BEGIN2 ;0x03d0
	NOP	 ;0x03d1
		
	
